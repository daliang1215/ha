{"version":3,"file":"e9fa5d6cacfa64aa05e4.chunk.js","sources":["webpack:///e9fa5d6cacfa64aa05e4.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{201:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"b\",function(){return PaperDialogBehaviorImpl});__webpack_require__.d(__webpack_exports__,\"a\",function(){return PaperDialogBehavior});var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_iron_overlay_behavior_iron_overlay_behavior_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(53),_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),PaperDialogBehaviorImpl={hostAttributes:{role:\"dialog\",tabindex:\"-1\"},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:[\"_modalChanged(modal, __readied)\"],listeners:{tap:\"_onDialogClick\"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.__readied=!0},_modalChanged:function(modal,readied){if(!readied){return}if(modal){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.noCancelOnOutsideClick=!0;this.noCancelOnEscKey=!0;this.withBackdrop=!0}else{this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick;this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey;this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop}},_updateClosingReasonConfirmed:function(confirmed){this.closingReason=this.closingReason||{};this.closingReason.confirmed=confirmed},_onDialogClick:function(event){for(var path=Object(_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_2__.b)(event).path,i=0,l=path.indexOf(this),target;i<l;i++){target=path[i];if(target.hasAttribute&&(target.hasAttribute(\"dialog-dismiss\")||target.hasAttribute(\"dialog-confirm\"))){this._updateClosingReasonConfirmed(target.hasAttribute(\"dialog-confirm\"));this.close();event.stopPropagation();break}}}},PaperDialogBehavior=[_polymer_iron_overlay_behavior_iron_overlay_behavior_js__WEBPACK_IMPORTED_MODULE_1__.a,PaperDialogBehaviorImpl];/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/},204:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_iron_flex_layout_iron_flex_layout_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),_polymer_paper_styles_default_theme_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29),_polymer_paper_styles_typography_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(42),_polymer_paper_styles_shadow_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(63),$_documentContainer=document.createElement(\"template\");/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/$_documentContainer.setAttribute(\"style\",\"display: none;\");$_documentContainer.innerHTML=\"<dom-module id=\\\"paper-dialog-shared-styles\\\">\\n  <template>\\n    <style>\\n      :host {\\n        display: block;\\n        margin: 24px 40px;\\n\\n        background: var(--paper-dialog-background-color, var(--primary-background-color));\\n        color: var(--paper-dialog-color, var(--primary-text-color));\\n\\n        @apply --paper-font-body1;\\n        @apply --shadow-elevation-16dp;\\n        @apply --paper-dialog;\\n      }\\n\\n      :host > ::slotted(*) {\\n        margin-top: 20px;\\n        padding: 0 24px;\\n      }\\n\\n      :host > ::slotted(.no-padding) {\\n        padding: 0;\\n      }\\n\\n      \\n      :host > ::slotted(*:first-child) {\\n        margin-top: 24px;\\n      }\\n\\n      :host > ::slotted(*:last-child) {\\n        margin-bottom: 24px;\\n      }\\n\\n      /* In 1.x, this selector was `:host > ::content h2`. In 2.x <slot> allows\\n      to select direct children only, which increases the weight of this\\n      selector, so we have to re-define first-child/last-child margins below. */\\n      :host > ::slotted(h2) {\\n        position: relative;\\n        margin: 0;\\n\\n        @apply --paper-font-title;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-top. */\\n      :host > ::slotted(h2:first-child) {\\n        margin-top: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-bottom. */\\n      :host > ::slotted(h2:last-child) {\\n        margin-bottom: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      :host > ::slotted(.paper-dialog-buttons),\\n      :host > ::slotted(.buttons) {\\n        position: relative;\\n        padding: 8px 8px 8px 24px;\\n        margin: 0;\\n\\n        color: var(--paper-dialog-button-color, var(--primary-color));\\n\\n        @apply --layout-horizontal;\\n        @apply --layout-end-justified;\\n      }\\n    </style>\\n  </template>\\n</dom-module>\";document.head.appendChild($_documentContainer.content)},207:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_paper_dialog_behavior_paper_dialog_shared_styles_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(204),_polymer_neon_animation_neon_animation_runner_behavior_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(95),_polymer_paper_dialog_behavior_paper_dialog_behavior_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(201),_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0);function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    <style include=\\\"paper-dialog-shared-styles\\\"></style>\\n    <slot></slot>\\n\"]);_templateObject=function(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/Object(_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__.a)({_template:Object(_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__.a)(_templateObject()),is:\"paper-dialog\",behaviors:[_polymer_paper_dialog_behavior_paper_dialog_behavior_js__WEBPACK_IMPORTED_MODULE_3__.a,_polymer_neon_animation_neon_animation_runner_behavior_js__WEBPACK_IMPORTED_MODULE_2__.a],listeners:{\"neon-animation-finish\":\"_onNeonAnimationFinish\"},_renderOpened:function(){this.cancelAnimation();this.playAnimation(\"entry\")},_renderClosed:function(){this.cancelAnimation();this.playAnimation(\"exit\")},_onNeonAnimationFinish:function(){if(this.opened){this._finishRenderOpened()}else{this._finishRenderClosed()}}})},679:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var _polymer_paper_button_paper_button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54),_polymer_paper_dialog_paper_dialog__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(207),_polymer_paper_spinner_paper_spinner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(124),_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_resources_ha_style__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(120),_mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10);function _typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    <style include=\\\"ha-style-dialog\\\">\\n      .error {\\n        color: red;\\n      }\\n      @media all and (max-width: 500px) {\\n        paper-dialog {\\n          margin: 0;\\n          width: 100%;\\n          max-height: calc(100% - 64px);\\n\\n          position: fixed !important;\\n          bottom: 0px;\\n          left: 0px;\\n          right: 0px;\\n          overflow: scroll;\\n          border-bottom-left-radius: 0px;\\n          border-bottom-right-radius: 0px;\\n        }\\n      }\\n\\n      paper-dialog {\\n        border-radius: 2px;\\n      }\\n      paper-dialog p {\\n        color: var(--secondary-text-color);\\n      }\\n\\n      .icon {\\n        float: right;\\n      }\\n    </style>\\n    <paper-dialog id=\\\"mp3dialog\\\" with-backdrop opened=\\\"{{_opened}}\\\" on-opened-changed=\\\"_openedChanged\\\">\\n      <h2>\\n        [[localize('ui.panel.mailbox.playback_title')]]\\n        <div class='icon'>\\n        <template is=\\\"dom-if\\\" if=\\\"[[_loading]]\\\">\\n          <paper-spinner active></paper-spinner>\\n        </template>\\n        <paper-icon-button\\n          id='delicon'\\n          on-click='openDeleteDialog'\\n          icon='hass:delete'\\n        ></paper-icon-button>\\n        </div>\\n      </h2>\\n      <div id=\\\"transcribe\\\"></div>\\n      <div>\\n        <template is=\\\"dom-if\\\" if=\\\"[[_errorMsg]]\\\">\\n          <div class='error'>[[_errorMsg]]</div>\\n        </template>\\n        <audio id=\\\"mp3\\\" preload=\\\"none\\\" controls> <source id=\\\"mp3src\\\" src=\\\"\\\" type=\\\"audio/mpeg\\\" /></audio>\\n      </div>\\n    </paper-dialog>\\n\"]);_templateObject=function(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(\"object\"===_typeof(call)||\"function\"===typeof call)){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var HaDialogShowAudioMessage=function(_LocalizeMixin){_inherits(HaDialogShowAudioMessage,_LocalizeMixin);function HaDialogShowAudioMessage(){_classCallCheck(this,HaDialogShowAudioMessage);return _possibleConstructorReturn(this,_getPrototypeOf(HaDialogShowAudioMessage).apply(this,arguments))}_createClass(HaDialogShowAudioMessage,[{key:\"showDialog\",value:function(_ref){var _this=this,hass=_ref.hass,message=_ref.message;this.hass=hass;this._errorMsg=null;this._currentMessage=message;this._opened=!0;this.$.transcribe.innerText=message.message;var platform=message.platform,mp3=this.$.mp3;if(platform.has_media){mp3.style.display=\"\";this._showLoading(!0);mp3.src=null;var url=\"/api/mailbox/media/\".concat(platform.name,\"/\").concat(message.sha);this.hass.fetchWithAuth(url).then(function(response){if(response.ok){return response.blob()}return Promise.reject({status:response.status,statusText:response.statusText})}).then(function(blob){_this._showLoading(!1);mp3.src=window.URL.createObjectURL(blob);mp3.play()}).catch(function(err){_this._showLoading(!1);_this._errorMsg=\"Error loading audio: \".concat(err.statusText)})}else{mp3.style.display=\"none\";this._showLoading(!1)}}},{key:\"openDeleteDialog\",value:function(){if(confirm(this.localize(\"ui.panel.mailbox.delete_prompt\"))){this.deleteSelected()}}},{key:\"deleteSelected\",value:function(){var msg=this._currentMessage;this.hass.callApi(\"DELETE\",\"mailbox/delete/\".concat(msg.platform.name,\"/\").concat(msg.sha));this._dialogDone()}},{key:\"_dialogDone\",value:function(){this.$.mp3.pause();this.setProperties({_currentMessage:null,_errorMsg:null,_loading:!1,_opened:!1})}},{key:\"_openedChanged\",value:function(ev){if(!ev.detail.value){this._dialogDone()}}},{key:\"_showLoading\",value:function(displayed){var delicon=this.$.delicon;if(displayed){this._loading=!0;delicon.style.display=\"none\"}else{var platform=this._currentMessage.platform;this._loading=!1;delicon.style.display=platform.can_delete?\"\":\"none\"}}}],[{key:\"template\",get:function(){return Object(_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_3__.a)(_templateObject())}},{key:\"properties\",get:function(){return{hass:Object,_currentMessage:Object,_errorMsg:String,_loading:{type:Boolean,value:!1},_opened:{type:Boolean,value:!1}}}}]);return HaDialogShowAudioMessage}(Object(_mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_6__.a)(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_4__.a));customElements.define(\"ha-dialog-show-audio-message\",HaDialogShowAudioMessage)}}]);"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}